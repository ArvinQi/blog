---
title: react学习笔记
date: 2017-05-09 10:35:33
tags: [框架,react]
---

接触react之前，主要接触的是传统的web开发，也尝试了Angular。虽然Angular的双向绑定给我提供了很大的便利，但也带来了诸多问题。Redux提供的一个单项数据流，确实解决了很多问题，不会让变化无路可循，调试也方便了很多，特别是时间漫游功能能让你跨越时间去观察那里不对，即时是稍纵即逝的变化也能完美的还原。React的变成理念跟传统理念区别确实很大，刚开始的确需要适应。特别是模块的理念，以前用requirejs来实现模块化，react采用webpack来提供的模块化规范，只要配置好就不需要关注太多构建的问题，只要专心写模块的代码就好了。不过模块化的尺度开始很难把握，模块最小要写到什么程度。后面会一一讲解，学习中遇到的问题以及一些小小的经验。

### 首先-基础知识

要想开始一个项目，感觉还是要从观念上开始转变。react提倡组件化的开发理念，把能复用的部分抽象出来，以提高开发速度。简单的单页应用没必要引入状态管理，直接用react就可以了。倘若状态过于复杂或者项目后期会做的很大，那就有必要引入状态管理了，比如redux，flux等。

另外一个重要的概念可能就是函数式编程（这个我的了解也不是很深入，不多说）了，总的来说组建都是无状态的，以来于唯一的store来管理项目所有的状态。

去[React](https://facebook.github.io/react/)开一看，然后下个demo研读一下代码能帮助更快的了解react的开发理念。

### 实践

最开始想自己用webpack搭建一个构建环境，自己写总是要不断完善，前期改动量太大（反复修改以前的代码），不利于敏捷开发。后来选择用redux-cli来帮我们完成项目基础架构的搭建，然后在这个基础上根据项目情况逐步完善。

首先，基础框架加入了[react-bootstrap](https://react-bootstrap.github.io/), [antd](https://ant.design/)，图标使用的是[iconfont](http://iconfont.cn/)，

然后，我们需要前后台layout不一样，于是根据路由调用不同的模版来实现了（感觉这里不是很好，把layout碎片化去掉用可能会好点），然后后台模版引入了一个主题框架（这应该是最大的败笔了，因为这个框架依赖于jquery，而且不符合react的单向数据流的理念），既然不是什么好事情就不详细描述了。

**API请求** 我们后台要求[json-api](http://jsonapi.org/implementations/)，于是采用了redux-json-api来实现，当然这个也有弊端，如果让我再次选择的话，我宁愿选择axios，因为redux-json-api依赖于redux，所以没法脱离框架去使用。然后把模块本身的请求都写到了相应的模块里，这样也不好，最好是把所有请求都写在一起，这样便于管理。

**Form表单验证** 基本上每个项目都会涉及到，开始我们使用了[formsy-react](https://github.com/christianalfoni/formsy-react)，后来发现跟redux不能很好的结合在一起，就换成了[redux-form](http://redux-form.com/6.0.2/) ，这个选择是正确的，redux-form 提供了完善的表单验证方案，它也使我们能够把每一个输入控件抽象出来进行自定义，这样既保证了统一性，又能提升开发效率。

### 结束
只能说自己对react还不够熟练，算是能够处理基本问题吧。自己挖坑自己填，做一个有思想的程序员。
