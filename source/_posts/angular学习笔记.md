---
title: angular学习笔记
date: 2017-06-07 14:26:28
tags: [框架,angular1.0]
---
这个很久之前学习的，最近趁着项目重构复习下angular，随便做个笔记，以便学习交流。

### 晦涩难懂

最开始接触angular1.0就是这样的感觉，似乎完全搞不懂为什么是这么写。每个框架都自己定义了语法，优劣也不得而知，有好有坏吧。当初使用angular也是因为它的数据双向绑定能提供很大的遍历（某些时候也是麻烦）。现在angular都已经4.0了吧，不过还没有机会研究学习。个人感觉，比起vue和react而言，angular很重。

### 说一下我们项目的那些坑吧

项目开始是从别人手里接过来的，基本框架都已经成型了。然后我做的就是继续完善功能需求，并对框架进行一些重构和调优。
1.多个框架的混用（bootstrap,jqueryui,webui)，导致样式各种覆盖，不能快速的实现想要的需求。为了使用框架的某个插件而把整个框架引入得不偿失，js也会冲突。
2.并没有使用angular来做单页面应用，而是直接调用angular到不同的page中。这样路由只能依靠静态文件作为入口，权限也不太好控制。
3.没有引入状态管理，导致angular状态非常混乱，多个组件数据交互麻烦，虽然jquery DOM对象可以拿到scope让这点得到缓解，但是维护起来依然成本很高。常常找不到要改的东西在哪里，这个数据哪里又做了改动。
4.对jquery的依赖严重，使用jquery操作DOM然后，scope数据变化以后，DOM重绘。所以有时候就要设置一个定时器来保证DOM依照想要的方式显示（这一点也不是个好办法）。
5.组件的划分粒度不够合理，有时候一个表单控件是一个组件，有时候一整个模块是一个组件。这也是对自定义标签的滥用导致的吧，是的维护时，经常需要查找半天才能找到要改的东西在哪里。
6.没有很好的模块化支持，或者说基本么有吧，模块混乱不堪，维护起来也很吃力。
7.有些时候需要单向数据绑定，这时候就很头疼了，只能自己拼接字符串，虽然angular有提供单项绑定，不过在我们项目版本里并不能用。
8.动态的加载js和css，这让后期做版本化难度很大，后面会有一篇专门介绍如何使用gulp构建项目

### angular肯定还有很多优点的

比起传统的jquery主导的前端而言，angular有着它天生的优势，可能是太挑剔了，优点竟然没有缺点多。
1.双向数据绑定，大部分时候还是能省去很多麻烦，比如数据异步更新之后的页面刷新。
2.丰富的生态，基本上angular社区能提供所需要的所有组件，比如多语言ng-translate，表单验证ng-message等
3.很好的和jquery协作，及时使用jquery插件也能很好的调用angular的方法。

### 一点点小小的见解吧

开发angular项目最好开始就把项目构建做好，不然开发一般想考虑构建，这也不行那也不行。开始享用fis做构建，因为js和css是通过js动态引入，然后各种问题，弃了，最后只好用gulp自己写了个构建。
然后就是做好模块化，可以使用requirejs来实现。再就是引入状态管理（例如redux），或者状态统一放到根scope。另外，这篇只适用于angular1.0。